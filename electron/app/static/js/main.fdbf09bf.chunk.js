(this.webpackJsonpmizan=this.webpackJsonpmizan||[]).push([[1],{121:function(e,n,t){var r={"./ion-action-sheet.entry.js":[159,5],"./ion-alert.entry.js":[160,6],"./ion-app_8.entry.js":[161,7],"./ion-avatar_3.entry.js":[162,17],"./ion-back-button.entry.js":[163,18],"./ion-backdrop.entry.js":[164,43],"./ion-button_2.entry.js":[165,19],"./ion-card_5.entry.js":[166,20],"./ion-checkbox.entry.js":[167,21],"./ion-chip.entry.js":[168,22],"./ion-col_3.entry.js":[169,44],"./ion-datetime_3.entry.js":[170,10],"./ion-fab_3.entry.js":[171,23],"./ion-img.entry.js":[172,45],"./ion-infinite-scroll_2.entry.js":[173,46],"./ion-input.entry.js":[174,24],"./ion-item-option_3.entry.js":[175,25],"./ion-item_8.entry.js":[176,26],"./ion-loading.entry.js":[177,27],"./ion-menu_3.entry.js":[178,28],"./ion-modal.entry.js":[179,8],"./ion-nav_2.entry.js":[180,14],"./ion-popover.entry.js":[181,9],"./ion-progress-bar.entry.js":[182,29],"./ion-radio_2.entry.js":[183,30],"./ion-range.entry.js":[184,31],"./ion-refresher_2.entry.js":[185,11],"./ion-reorder_2.entry.js":[186,16],"./ion-ripple-effect.entry.js":[187,47],"./ion-route_4.entry.js":[188,32],"./ion-searchbar.entry.js":[189,33],"./ion-segment_2.entry.js":[190,34],"./ion-select_3.entry.js":[191,35],"./ion-slide_2.entry.js":[192,48],"./ion-spinner.entry.js":[193,13],"./ion-split-pane.entry.js":[194,49],"./ion-tab-bar_2.entry.js":[195,36],"./ion-tab_2.entry.js":[196,15],"./ion-text.entry.js":[197,37],"./ion-textarea.entry.js":[198,38],"./ion-toast.entry.js":[199,39],"./ion-toggle.entry.js":[200,12],"./ion-virtual-scroll.entry.js":[201,50]};function i(e){if(!t.o(r,e))return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}));var n=r[e],i=n[0];return t.e(n[1]).then((function(){return t(i)}))}i.keys=function(){return Object.keys(r)},i.id=121,e.exports=i},123:function(e,n,t){var r={"./ion-icon.entry.js":[202,57]};function i(e){if(!t.o(r,e))return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}));var n=r[e],i=n[0];return t.e(n[1]).then((function(){return t(i)}))}i.keys=function(){return Object.keys(r)},i.id=123,e.exports=i},128:function(e,n,t){},129:function(e,n,t){},136:function(e,n,t){},137:function(e,n,t){},148:function(e,n,t){},157:function(e,n,t){"use strict";t.r(n);var r,i=t(1),c=t.n(i),o=t(49),a=t.n(o),l=t(54),d=t(5),s=t(114),j=(t(128),t(48));t(129);!function(e){e.UPDATE_SCOREBOARD="UPDATE_SCOREBOARD",e.UPDATE_RECORD_DRAFT="UPDATE_RECORD_DRAFT",e.RESET_RECORD_DRAFT="RESET_RECORD_DRAFT",e.RESET_SCOREBOARD="RESET_SCOREBOARD",e.CAPTURE_READING="CAPTURE_READING",e.DELETE_RECORD_DRAFT="DELETE_RECORD_DRAFT"}(r||(r={}));var u,O,b,h,g=function(e){return function(n){return n({type:r.UPDATE_SCOREBOARD,payload:e})}},p=function(){return function(e){return e({type:r.DELETE_RECORD_DRAFT})}},f=t(63),v=t(23),R=(Object(v.gql)(u||(u=Object(f.a)(["\n  query {\n    users {\n      id\n      name {\n        first\n        last\n        display\n      }\n    }\n  }\n"]))),Object(v.gql)(O||(O=Object(f.a)(["\n  mutation CreateRecord(\n    $weight: Int!\n    $createdAt: String!\n    $plateNumber: String!\n    $plateCode: Int!\n    $plateRegion: String!\n  ) {\n    createRecord(\n      weight: $weight\n      createdAt: $createdAt\n      plateNumber: $plateNumber\n      plateCode: $plateCode\n      plateRegion: $plateRegion\n    )\n  }\n"])))),E=Object(v.gql)(b||(b=Object(f.a)(["\n  query FetchRecords {\n    records {\n      id\n      createdAt\n      # vehicle {\n      #   licensePlate {\n      #     code\n      #     region\n      #     plate\n      #   }\n      # }\n    }\n  }\n"]))),x=Object(v.gql)(h||(h=Object(f.a)(["\n  subscription {\n    reading\n  }\n"]))),m=t(109),D=t.n(m),y=t(3),A=Object(j.b)((function(e){return{reading:e.scoreboard.reading}}),{updateReading:g,deleteRecordDraft:p})((function(e){var n,t,r,c=Object(v.useSubscription)(x),o=c.error,a=c.loading,l=c.data;return Object(i.useEffect)((function(){l&&e.updateReading({receivedAt:(new Date).getTime(),weight:l.reading}),a&&e.deleteRecordDraft()}),[l,o,a,e]),Object(y.jsx)("div",{className:D()({scoreboard:!0,error:isNaN(+(null===(n=e.reading)||void 0===n?void 0:n.weight))}),children:isNaN(+(null===(t=e.reading)||void 0===t?void 0:t.weight))?Object(y.jsx)("span",{className:"reading",children:e.reading||"no signal"}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("span",{className:"reading",children:null===(r=e.reading)||void 0===r?void 0:r.weight}),Object(y.jsx)("span",{className:"unit",children:"KG"})]})})})),_=t(18),T=t(34),C=(t(136),t(21)),P=["OTHER",1,2,3,4,5],w=[{code:"OTHER",name:"OTHER"},{code:"AA",name:"ADDIS ABABA"},{code:"AF",name:"AFAR"},{code:"AM",name:"AMHARA"},{code:"BG",name:"BENI SHANGUL GUMUZ"},{code:"DR",name:"DIRE DAWA"},{code:"ET",name:"ETHIOPIA"},{code:"GB",name:"GAMBELLA"},{code:"HR",name:"HARARI"},{code:"OR",name:"OROMIA"},{code:"SI",name:"SIDAMA"},{code:"SM",name:"SOMALI"},{code:"SP",name:"SOUTHERN PEOPLE"},{code:"TG",name:"TIGRAY"}],S=(t(137),Object(j.b)((function(e){return{}}),{updateReading:g})((function(e){var n=Object(v.useQuery)(E),t=(n.loading,n.error,n.data);return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(d.c,{children:[Object(y.jsx)(d.e,{children:Object(y.jsx)(d.f,{children:"RECORDS"})}),Object(y.jsxs)(d.o,{children:[Object(y.jsx)(d.m,{children:Object(y.jsx)(d.i,{children:Object(y.jsxs)(d.s,{className:"header-row",children:[Object(y.jsx)(d.g,{children:Object(y.jsx)(d.v,{children:"Vehicle"})}),Object(y.jsx)(d.g,{children:Object(y.jsx)(d.v,{children:"First Weight"})}),Object(y.jsx)(d.g,{children:Object(y.jsx)(d.v,{children:"Second Weight"})})]})})}),Object(y.jsx)(d.m,{children:Object(y.jsx)(d.i,{children:JSON.stringify(t)})})]})]})})}))),N=Object(j.b)((function(e){return{reading:e.scoreboard.reading,draft:e.record.recordDraft}}),{updateReading:g,updateRecordDraft:function(e){return function(n){return n({type:r.UPDATE_RECORD_DRAFT,payload:e})}},deleteRecordDraft:p})((function(e){var n,t,r,i,c,o,a,l=Object(v.useMutation)(R),s=Object(T.a)(l,2),j=s[0],u=(s[1].data,function(){var n,t,r,i,c,o;e.updateRecordDraft(Object(_.a)(Object(_.a)({},e.draft),{},{reading:e.reading,licensePlate:{plate:(null===(n=e.draft)||void 0===n||null===(t=n.licensePlate)||void 0===t?void 0:t.plate)||"",code:(null===(r=e.draft)||void 0===r||null===(i=r.licensePlate)||void 0===i?void 0:i.code)||3,region:(null===(c=e.draft)||void 0===c||null===(o=c.licensePlate)||void 0===o?void 0:o.region)||"AA"}}))});return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(d.c,{children:e.draft?Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(d.o,{children:[Object(y.jsxs)(d.m,{children:[Object(y.jsxs)(d.b,{onClick:u,shape:"round",fill:"clear",size:"small",children:[Object(y.jsx)(d.k,{slot:"start",icon:C.p}),"Capture Again"]}),Object(y.jsxs)(d.b,{onClick:function(){e.deleteRecordDraft()},shape:"round",fill:"clear",color:"danger",size:"small",children:[Object(y.jsx)(d.k,{slot:"start",icon:C.h}),"Delete"]})]}),Object(y.jsxs)(d.c,{className:"current-weight-card",children:[Object(y.jsx)(d.f,{children:"Current Weight:\xa0"}),Object(y.jsx)(d.d,{children:Object(y.jsxs)("h1",{children:[e.draft.reading.weight," KG"]})})]})]})}):Object(y.jsx)(d.o,{children:Object(y.jsx)(d.m,{children:Object(y.jsxs)(d.b,{className:"full-button",color:"primary",size:"large",shape:"round",fill:"solid",expand:"block",onClick:u,children:[Object(y.jsx)(d.k,{slot:"start",icon:C.p}),"Capture Weight"]})})})}),e.draft?Object(y.jsx)(d.c,{children:Object(y.jsxs)(d.o,{lines:"inset",children:["",Object(y.jsxs)(d.m,{children:[Object(y.jsx)(d.n,{children:"Licence Plate:"}),Object(y.jsx)(d.l,{onIonChange:function(n){var t,r,i=null===(t=n.detail)||void 0===t?void 0:t.value.split(/[^a-zA-Z0-9]/).join("").trim().toUpperCase();n.target.value=i,e.updateRecordDraft(Object(_.a)(Object(_.a)({},e.draft),{},{licensePlate:Object(_.a)(Object(_.a)({},null===(r=e.draft)||void 0===r?void 0:r.licensePlate),{},{plate:i})}))},maxlength:6,size:6,required:!0,autofocus:!0,pattern:"/[a-zA-Z0-9]/",placeholder:"Enter Licence Plate",clearInput:!0,className:"uppercase align-right"}),Object(y.jsx)(d.t,{onIonChange:function(n){var t,r,i=null===(t=n.detail)||void 0===t?void 0:t.value;e.updateRecordDraft(Object(_.a)(Object(_.a)({},e.draft),{},{licensePlate:Object(_.a)(Object(_.a)({},null===(r=e.draft)||void 0===r?void 0:r.licensePlate),{},{code:i})}))},value:"number"===typeof(null===(n=e.draft)||void 0===n||null===(t=n.licensePlate)||void 0===t?void 0:t.code)?e.draft.licensePlate.code:3,interface:"popover",children:P.map((function(e,n){return Object(y.jsx)(d.u,{value:n,children:"number"===typeof e?"CODE 0".concat(e):e})}))}),Object(y.jsx)(d.t,{id:"plate-region-select",onIonChange:function(n){var t,r,i=null===(t=n.detail)||void 0===t?void 0:t.value;e.updateRecordDraft(Object(_.a)(Object(_.a)({},e.draft),{},{licensePlate:Object(_.a)(Object(_.a)({},null===(r=e.draft)||void 0===r?void 0:r.licensePlate),{},{region:i})}))},value:(null===(r=e.draft)||void 0===r||null===(i=r.licensePlate)||void 0===i?void 0:i.region)||"AA",interface:"action-sheet",children:w.map((function(e){return Object(y.jsxs)(d.u,{value:e.code,children:["OTHER"!==e.code?"[".concat(e.code,"] "):"",e.name]})}))})]}),"",Object(y.jsx)(d.m,{children:Object(y.jsx)(d.i,{className:"align-right",children:Object(y.jsx)(d.g,{children:Object(y.jsxs)(d.b,{color:"success",shape:"round",onClick:function(){var n,t,r=e.draft;r&&(null===(n=r.reading)||void 0===n?void 0:n.weight)&&(null===(t=r.licensePlate)||void 0===t?void 0:t.plate)?(console.log(r),j({variables:{weight:r.reading.weight,createdAt:r.reading.receivedAt.toString(),plateNumber:r.licensePlate.plate,plateCode:r.licensePlate.code,plateRegion:r.licensePlate.region}})):console.error("whoopsie")},disabled:!((null===(c=e.draft)||void 0===c||null===(o=c.licensePlate)||void 0===o||null===(a=o.plate)||void 0===a?void 0:a.length)>=5),children:[Object(y.jsx)(d.k,{icon:C.c}),"Save Record"]})})})})]})}):"",Object(y.jsx)(S,{})]})})),F=function(){return Object(y.jsxs)(d.p,{children:[Object(y.jsx)(d.j,{children:Object(y.jsx)(d.w,{children:Object(y.jsx)(A,{})})}),Object(y.jsx)(d.h,{className:"ion-padding",children:Object(y.jsx)(N,{})})]})},k=(t(138),t(139),t(140),t(141),t(142),t(143),t(144),t(145),t(146),t(147),t(148),t(110)),I=t(111),U=t(2),L=Object(k.a)((function(e){var n=e.graphQLErrors;null===n||void 0===n||n.map(console.error)})),B=Object(v.from)([L,new v.HttpLink({uri:"http://localhost:8989/"})]),M=new I.a({uri:"ws://localhost:8989/graphql",options:{reconnect:!0}}),G=Object(v.split)((function(e){var n=e.query,t=Object(U.q)(n);return"OperationDefinition"===t.kind&&"subscription"===t.operation}),M,B),H=new v.ApolloClient({cache:new v.InMemoryCache,link:G}),$=function(){return Object(y.jsx)(v.ApolloProvider,{client:H,children:Object(y.jsx)(d.a,{children:Object(y.jsx)(s.a,{children:Object(y.jsxs)(d.r,{children:[Object(y.jsx)(l.b,{exact:!0,path:"/home",children:Object(y.jsx)(F,{})}),Object(y.jsx)(l.b,{exact:!0,path:"/",children:Object(y.jsx)(l.a,{to:"/home"})})]})})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var q=function(e){e&&e instanceof Function&&t.e(58).then(t.bind(null,219)).then((function(n){var t=n.getCLS,r=n.getFID,i=n.getFCP,c=n.getLCP,o=n.getTTFB;t(e),r(e),i(e),c(e),o(e)}))},z=t(46),W=Object(z.c)({scoreboard:function(){var e,n,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1?arguments[1]:void 0;switch(i.type){case r.UPDATE_SCOREBOARD:return(null===(e=i.payload)||void 0===e?void 0:e.weight)===(null===(n=t.reading)||void 0===n?void 0:n.weight)?t:Object(_.a)(Object(_.a)({},t),{},{reading:i.payload});case r.RESET_SCOREBOARD:return 0;case r.DELETE_RECORD_DRAFT:return Object(_.a)(Object(_.a)({},t),{},{capture:i.payload});default:return t}},record:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;switch(n.type){case r.UPDATE_RECORD_DRAFT:return Object(_.a)(Object(_.a)({},e),{},{recordDraft:n.payload});case r.DELETE_RECORD_DRAFT:return Object(_.a)(Object(_.a)({},e),{},{recordDraft:void 0});default:return e}}}),J=t(112),Z=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||z.d,K=[J.a],Q=Object(z.e)(W,{},Object(z.d)(z.a.apply(void 0,K),Z()));a.a.render(Object(y.jsx)(j.a,{store:Q,children:Object(y.jsx)(c.a.StrictMode,{children:Object(y.jsx)($,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),q()}},[[157,3,4]]]);
//# sourceMappingURL=main.fdbf09bf.chunk.js.map